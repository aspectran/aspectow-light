<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE aspectran PUBLIC "-//ASPECTRAN//DTD Aspectran Configuration 6.0//EN"
        "http://aspectran.github.io/dtd/aspectran-6.dtd">
<aspectran>

    <aspect id="errorReport">
        <description>
            Prints a simple error message to the console if an unexpected error occurs during processing of the translet.
            Outputs an error page that matches the type of content being rendered.
        </description>
        <joinpoint target="translet"/>
        <exception>
            <thrown>
                <transform type="text">
                    <template style="apon">
                        |
                        |An Error Occurred!
                        |-----------------------------------------------------------------------------------------
                        |#{currentTranslet^rootCauseOfRaisedException}
                        |-----------------------------------------------------------------------------------------
                        |#{class:com.aspectran.core.util.Aspectran^poweredBy}
                        |
                    </template>
                </transform>
                <transform type="text" contentType="text/html" default="true">
                    <template style="apon">
                        <![CDATA[
                        |<html>
                        |<body style="color:#eee;background-color:#000;">
                        |<h1 style="color:red;">An Error Occurred!</h1>
                        |<hr/>
                        |<pre>#{currentTranslet^rootCauseOfRaisedException}</pre>
                        |<hr/>
                        |<p align="right">#{class:com.aspectran.core.util.Aspectran^poweredByLink}</p>
                        |</body>
                        |</html>
                        ]]>
                    </template>
                </transform>
            </thrown>
        </exception>
    </aspect>

</aspectran>